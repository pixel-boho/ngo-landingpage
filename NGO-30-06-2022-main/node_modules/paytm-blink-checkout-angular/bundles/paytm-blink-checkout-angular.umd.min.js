!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("paytm-blink-checkout-angular",["exports","rxjs","@angular/core","@angular/common"],e):e(t["paytm-blink-checkout-angular"]={},t.rxjs,t.ng.core,t.ng.common)}(this,function(t,o,e,n){"use strict";var c=function(){return(c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c]);return t}).apply(this,arguments)},i={PROJECT_NAME:"Paytm Blink Checkout JS",ENV:{PROD:"PROD",STAGE:"STAGE"},HOSTS:{PROD:"https://securegw.paytm.in",STAGE:"https://securegw-stage.paytm.in"},LINKS:{CHECKOUT_JS_URL:"/merchantpgpui/checkoutjs/merchants/"},ERRORS:{INIT:"An error during initialization!",INVOKE:"An error during invoking!",MERCHANT_ID_NOT_FOUND:"Please provide merchant id!",CHECKOUT_NOT_AVAILABLE:"Checkout JS library not found. Please make sure you have included checkout js!",INVALID_CHECKOUT_JS_INSTANCE:"Invalid instance provided!"},IDS:{CHECKOUT_ELEMENT:"checkout-wrapper-"}};Object.keys(i.ERRORS).forEach(function(t){i.ERRORS[t]=i.PROJECT_NAME+": "+i.ERRORS[t]});var r=new e.InjectionToken("Window",{providedIn:"root",factory:function(){return window}}),s=function(){function e(t,e,n){this.env=t,this.openInPopup=e,this.checkoutJsInstance=n}return e.from=function(t){return new e((t=t||{}).env||i.ENV.PROD,"boolean"!=typeof t.openInPopup||t.openInPopup,t.checkoutJsInstance)},e}(),u=function(){function t(t,e){var n=this;this.window=t,this.document=e,this.openInPopup=!0,this.isScriptLoaded=!1,this.isScriptLoading=!1,this.checkoutJsContainerId=i.IDS.CHECKOUT_ELEMENT+(new Date).getTime(),this.checkoutJsInstanceSource$=new o.ReplaySubject(1),this.checkoutJsInstance$=this.checkoutJsInstanceSource$.asObservable(),this.setupCheckoutJs=function(){var t=n.getCheckoutJsObj();t&&t.onLoad&&t.onLoad(function(){n.isScriptLoaded=!0,n.isScriptLoading=!1,n.initializeCheckout()})},this.initializeCheckout=function(){var e=n.getCheckoutJsObj();e&&e.init&&e.invoke?e.init(c({},n.config,{root:n.openInPopup?"":"#"+n.checkoutJsContainerId})).then(function(t){n.checkoutJsInstanceSource$.next(e)})["catch"](function(t){console.error(i.ERRORS.INIT,t)}):console.error(i.ERRORS.INVALID_CHECKOUT_JS_INSTANCE)}}return t.prototype.init=function(t,e){e=s.from(e);var n=t&&t.merchant&&t.merchant.mid;if(n){var o=this.config&&this.config.merchant&&this.config.merchant.mid;this.config=t,this.openInPopup=e.openInPopup,e.checkoutJsInstance&&(this.receivedCheckoutJsInstance=e.checkoutJsInstance,this.checkoutJsInstanceSource$.next(e.checkoutJsInstance)),(e.checkoutJsInstance||this.isScriptLoaded)&&n===o?(this.initializeCheckout(),this.checkoutJsInstance$):(!this.isScriptLoading||o&&n!==o)&&this.loadCheckoutScript(n,e.env)}else console.error(i.ERRORS.MERCHANT_ID_NOT_FOUND)},t.prototype.loadCheckoutScript=function(t,e){var n=this;this.isScriptLoaded=!1,this.isScriptLoading=!0;var o=this.document.createElement("script");o.async=!0,o.src=i.HOSTS[e]+i.LINKS.CHECKOUT_JS_URL.concat(t),o.type="application/javascript",o.onload=this.setupCheckoutJs,o.onError=function(){n.isScriptLoading=!1},this.document.body.appendChild(o)},t.prototype.getCheckoutJsObj=function(){var t=this.window;return this.receivedCheckoutJsInstance?this.receivedCheckoutJsInstance:t&&t.Paytm&&t.Paytm.CheckoutJS?t.Paytm.CheckoutJS:(console.warn(i.ERRORS.CHECKOUT_NOT_AVAILABLE),null)},t.prototype.ngOnDestroy=function(){this.checkoutJsInstanceSource$.complete()},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[r]}]},{type:undefined,decorators:[{type:e.Inject,args:[n.DOCUMENT]}]}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(r),e.inject(n.DOCUMENT))},token:t,providedIn:"root"}),t}(),a=function(){function t(t){this.checkoutService=t}return t.prototype.ngAfterViewInit=function(){this.subs=this.checkoutService.checkoutJsInstance$.subscribe(this.invoke)},t.prototype.invoke=function(t){if(t&&t.invoke)try{t.invoke()}catch(e){console.error(i.ERRORS.INVOKE,e)}},t.prototype.ngOnDestroy=function(){this.subs&&this.subs.unsubscribe()},t.decorators=[{type:e.Component,args:[{selector:"paytm-checkout",template:'<div [id]="checkoutService.checkoutJsContainerId"><div>'}]}],t.ctorParameters=function(){return[{type:u}]},t}(),h=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[a],imports:[n.CommonModule],exports:[a]}]}],t}();t.Éµb=r,t.CheckoutService=u,t.CheckoutComponent=a,t.CheckoutModule=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=paytm-blink-checkout-angular.umd.min.js.map